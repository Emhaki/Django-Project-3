{% extends 'base.html' %}
{% load static %}

{% load django_bootstrap5 %}
{% block content %}

<div class="login-frame">
  <div class="login-frame__form">
    <img class="login-frame__form__img" src="{% static 'images/nes_orange.png' %}" alt="">
    <form id="login-form">
      {% csrf_token %}
      <input class="login-frame__form__id" type="text" name="username" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.">
      <input class="login-frame__form__password" type="password" name="password" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.">
      <button class="login-frame__form__logbtn">ë¡œê·¸ì¸</button>
    </form>
    <a href="{% url 'accounts:kakao' %}">
      <button class="login-frame__form__googlebtn">ğŸ³ CONTINUE WITH KAKAO</button>
    </a>
    <div class="login-frame__form__detail">
      <div class="login-frame_-form__detail__find">
        <a href="">ì•„ì´ë”” ì°¾ê¸°</a>
        |
        <a href="">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</a>
      </div>
      <div class="login-frame__form__detail__signup">
        <a href="{% url 'accounts:signup'%}">íšŒì›ê°€ì…</a>
      </div>
    </div>
  </div>
</div>
<script>
  const loginForm = document.querySelector("#login-form");
  loginForm.addEventListener("submit", function (event) {
    event.preventDefault();
    axios({
      method: "post",
      url: `/accounts/login/`,
      data: new FormData(loginForm)
    })
      .then(response => {
        if (response.data.errorMsg) {
          swal.fire({
            title: "í•œë²ˆ ë” í™•ì¸í•´ì£¼ì„¸ìš”!",
            text: response.data.errorMsg,
            icon: "error",
          });
          loginForm.reset();
        } else {
          window.location.href = "{% url 'articles:main' %}";
        };
      });
  });
</script>
{% endblock content %}